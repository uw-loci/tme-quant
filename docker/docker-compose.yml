version: '3.8'

services:
  tme-quant:
    build:
      context: ..
      dockerfile: docker/Dockerfile
    image: tme-quant:latest
    container_name: tme-quant
    volumes:
      # Mount CurveLab directory (user must provide this)
      # IMPORTANT: Adjust the path on the left to point to your CurveLab installation
      # Example: /path/to/CurveLab-2.1.x:/app/curvelab:ro
      # Or if CurveLab is parallel to tme-quant: ../curvelab:/app/curvelab:ro
      - ../curvelab:/app/curvelab:ro
      # Mount your data directory for input/output (adjust path as needed)
      - ../data:/app/data:rw
      # Optionally mount results directory (adjust path as needed)
      - ../results:/app/results:rw
    environment:
      - FDCT=/app/curvelab
      - FFTW=/usr/local/fftw-2.1.5
      - CPPFLAGS=-I/usr/local/fftw-2.1.5/include
      - LDFLAGS=-L/usr/local/fftw-2.1.5/lib
    command: /bin/bash
    stdin_open: true
    tty: true

